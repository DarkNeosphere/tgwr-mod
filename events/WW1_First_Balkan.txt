add_namespace = ww1_firstbalkan
###Warning for player basically
country_event = {
	id = ww1_firstbalkan.1
	title = ww1_firstbalkan.1.t
	desc = ww1_firstbalkan.1.d
	is_triggered_only = yes
	trigger = {
		is_in_faction_with = SER
	}
	option = {
		name = ww1_firstbalkan.1.a
		custom_effect_tooltip = balkan_war_start_tooltip
		add_ideas = war_of_liberation
		add_ai_strategy = {
			type = invade
			id = TUR
			value = 200
		}
		add_war_support = 0.05
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = ww1_firstbalkan.1.b
		leave_faction = yes
		add_war_support = -0.15
		SER = {
			add_opinion_modifier = {
				target = PREV
				modifier = faction_traitor
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}
#balkan war news
news_event = {
	id = ww1_firstbalkan.2
	title = ww1_firstbalkan.2.t
	desc = ww1_firstbalkan.2.d
	is_triggered_only = yes
	major = yes
	option = {
		name = ww1_firstbalkan.2.a
	}
}
#Albanian declaration of independence
country_event = {
	id = ww1_firstbalkan.3
	title = ww1_firstbalkan.3.t
	desc = ww1_firstbalkan.3.d
	is_triggered_only = yes
	trigger = {
		NOT = {
			country_exists = ALB
		}
	}
	immediate = {
		hidden_effect = {
			871 = {
				transfer_state_to = ALB
			}
			44 = {
				transfer_state_to = ALB
			}
		}
	}
	option = {
		name = ww1_firstbalkan.3.a
		add_war_support = -0.05
		ai_chance = {
			base = 10
		}
	}
	option = {
		name = ww1_firstbalkan.3.b
		trigger = {
			OR = {
				controls_state = 803
			}
		}
		declare_war_on = {
			target = ALB
			type = annex_everything
		}
		ai_chance = {
			base = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}
#Armistice
country_event = {
	id = ww1_firstbalkan.4
	title = ww1_firstbalkan.4.t
	desc = ww1_firstbalkan.4.d
	is_triggered_only = yes
	trigger = {
		has_war_with = TUR
	}
	option = {
		name = ww1_firstbalkan.4.a
		ai_chance = {
			base = 100
		}
		set_global_flag = kis_firstbalkanwar_victory
		custom_effect_tooltip = bw1_end_tooltip
		every_country = {
			limit = {
				is_in_faction_with = BUL
			}
			white_peace = TUR
			# every_state = {
			# 	limit = {
			# 		is_controlled_by = PREV
			# 		is_owned_by = TUR
			# 	}
			# 	transfer_state_to = PREV
			# }
			activate_mission = london_conference
		}
		if = {
			limit =  {
				country_exists = ALB
			}
			SER = {
				transfer_state = 44		## good dog
				transfer_state = 871	## good dog
				transfer_state = 848	## good dog
				transfer_state = 803	## good dog
			}
			MNT = {
				transfer_state = 870	## good dog
			}
		}
	}
}
#london conference 
country_event = {
	id = ww1_firstbalkan.5
	title = ww1_firstbalkan.5.t
	desc = ww1_firstbalkan.5.d
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			set_global_flag = london_conference
			every_country = {
				limit = {
					has_country_flag = BW1_winner
				}
				##bonus for bulgaria
				if = {
					limit = {
						tag = BUL
					}
					transfer_state = 200
					transfer_state = 757
					transfer_state = 184
				}	
				##bonus for serbia
				if = {
					limit = {
						tag = SER
					}
					every_state = {
						limit = {
							is_core_of = ALB
						}
						transfer_state_to = PREV
					}
				}
				every_state = {
					limit = {
						is_owned_by = TUR
						OR = {
							is_core_of = PREV
							is_claimed_by = PREV
						}
						NOT = {
							is_core_of = MAC	## this one is special, based on claim only and not cores
						}
					}
					transfer_state_to = PREV
				}
				#################### This is for macedonia, based on claims
				every_state = {
					limit = {
						NOT = {
							has_global_flag = autonomous_macedonia
						}
						is_owned_by = TUR
						is_core_of = MAC
						is_claimed_by = PREV
					}
					transfer_state_to = PREV
				}
			}
		}
	}
	option = {
		name = ww1_firstbalkan.5.a
		ai_chance = {
			factor = 100
		}
	}
}

#TUR_is_winning_balkan_war
country_event = {
	id = ww1_firstbalkan.10
	title = ww1_firstbalkan.10.t
	desc = ww1_firstbalkan.10.d
	picture = GFX_report_event_turkish_war_of_independence
	trigger = {
		tag = ENG
		has_global_flag = TUR_is_winning_balkan_war
	}
	## Ottoman war wining the balkan war, the great power will discuss impose to Ottoman conditions to avoid their total supremacy in balkans
	option = {
		name = ww1_firstbalkan.10.a	## lets form a great coalition and invite every great power
		add_war_support = 0.05
		set_global_flag = ENG_organise_the_anti_ottoman_coalition
		custom_effect_tooltip = ENG_anti_ottoman_coalition
		if = {
			limit = {
				is_major = yes
			}
			add_to_array = {
				array = global.anti_ottoman_coalition_leaders
				value = ROOT
			}
		}
		add_to_array = {
			array = global.anti_ottoman_coalition
			value = ROOT
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = ww1_firstbalkan.10.b	## Who are you ? Where im am ? - Joe Biden 2022
		ai_chance = {
			factor = 0
		}
	}
}

# ENG is inviting us into the coalition
country_event = {
	id = ww1_firstbalkan.11
	title = ww1_firstbalkan.11.t
	desc = ww1_firstbalkan.11.d
	picture = GFX_report_event_turkish_war_of_independence
	is_triggered_only = yes
	## Ottoman war wining the balkan war, the great power will discuss impose to Ottoman conditions to avoid their total supremacy in balkans
	option = {
		name = ww1_firstbalkan.11.a	## join coalition
		add_war_support = 0.05
		if = {
			limit = {
				is_major = yes
			}
			add_to_array = {
				array = global.anti_ottoman_coalition_leaders
				value = ROOT
			}
		}
		add_to_array = {
			array = global.anti_ottoman_coalition
			value = ROOT
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = ww1_firstbalkan.11.b	## No
		set_country_flag = dont_want_to_join_anti_ottoman_balkan_coalition
		ai_chance = {
			factor = 0
		}
	}
}

# ENG discussion about a minor balkan country
country_event = {
	id = ww1_firstbalkan.12
	title = ww1_firstbalkan.12.t
	desc = ww1_firstbalkan.12.d
	picture = GFX_report_event_turkish_war_of_independence
	is_triggered_only = yes
	immediate = {
		if = {
			limit = {
				check_variable = {
					id = global.BUL_coalition_fate_lose_rumelia
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.BUL_coalition_fate_lose_rumelia
					value = 0
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					id = global.BUL_coalition_fate_integrated_puppet
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.BUL_coalition_fate_integrated_puppet
					value = 0
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					id = global.BUL_coalition_fate_annexed
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.BUL_coalition_fate_annexed
					value = 0
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					id = global.BUL_coalition_fate_reparations
				}
			}
			else = {
				##setting up votes 
				set_variable = {
					id = global.BUL_coalition_fate_reparations
					value = 0
				}
			}
		}
	}
	## Ottoman can annex Rumelia
	option = {
		name = ww1_firstbalkan.12.a	
		add_to_variable = {
			var = global.BUL_coalition_fate_lose_rumelia
			value = 1
		}
		ai_chance = {
			factor = 30 #strong base
			modifier = {
				is_in_faction_with = TUR	## puppet is the best for our friend
				add = -100
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 50
				}
				add = 20 #friendly country
			}
		}
	}
	## Ottoman may puppet bulgaria
	option = {
		name = ww1_firstbalkan.12.b	## No
		add_to_variable = {
			var = global.BUL_coalition_fate_integrated_puppet
			value = 1
		}
		ai_chance = {
			factor = 10 #This is what ottomans want
			modifier = {
				is_in_faction_with = TUR	## puppet is the best for our friend
				add = 100
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 50
				}
				add = 20 #friendly country
			}
		}
	}
	## Ottoman may do whatever they want
	option = {
		name = ww1_firstbalkan.12.c	## No
		add_to_variable = {
			var = global.BUL_coalition_fate_annexed
			value = 1
		}
		ai_chance = {
			factor = 5 #low chances
			modifier = {
				is_in_faction_with = TUR	##its very good
				add = 200
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 100
				}
				add = 20 #must be very friendly
			}
		}
	}
	## Ottoman may just ask reparations
	option = {
		name = ww1_firstbalkan.12.e	## No
		add_to_variable = {
			var = global.BUL_coalition_fate_reparations
			value = 1
		}
		ai_chance = {
			factor = 15 #strong base
			modifier = {
				is_in_faction_with = TUR	##thats shit
				add = -100
			}
			modifier = {
				has_opinion = {
					target = TUR
					value > 50
				}
				add = -20 #friendly country
			}
		}
	}
}