add_namespace = ww1_bruderkrieg

#Pan Germans rebel
country_event = {
	id = ww1_bruderkrieg.1
	title = ww1_bruderkrieg.1.t
	desc = ww1_bruderkrieg.1.d
	trigger = {
		tag = GER
		has_war_with = AUH
	}
	fire_only_once = yes
	option = {
		name = ww1_bruderkrieg.1.a
		division_template = {
			name = "Pan German rebels"
			is_locked = yes
			regiments = {
				infantry = {
					x = 0
					y = 0
				}
				infantry = {
					x = 0
					y = 1
				}
				infantry = {
					x = 0
					y = 2
				}
			}
		}
		4 = {
			create_unit = {
				division = "name = \"Division I\" division_template = \"Pan German rebels\" start_experience_factor = 0.5 start_equipment_factor = 0.5"
				owner = GER
			}
			create_unit = {
				division = "name = \"Division I\" division_template = \"Pan German rebels\" start_experience_factor = 0.5 start_equipment_factor = 0.5"
				owner = GER
			}		
		}
		152 = {
			create_unit = {
				division = "name = \"Division I\" division_template = \"Pan German rebels\" start_experience_factor = 0.5 start_equipment_factor = 0.5"
				owner = GER
			}	
		}
		153 = {
			create_unit = {
				division = "name = \"Division I\" division_template = \"Pan German rebels\" start_experience_factor = 0.5 start_equipment_factor = 0.5"
				owner = GER
			}	
		}
		69 = {
			create_unit = {
				division = "name = \"Division I\" division_template = \"Pan German rebels\" start_experience_factor = 0.5 start_equipment_factor = 0.5"
				owner = GER
			}	
		}
		hidden_effect = {
			AUH = {
				country_event = ww1_bruderkrieg.2
			}
		}
	}
}

###Austria moves the capital as the result
country_event = {
	id = ww1_bruderkrieg.2
	title = ww1_bruderkrieg.2
	desc = ww1_bruderkrieg.2
	is_triggered_only = yes
	trigger = {
		original_tag = AUH
		has_war_with = GER
	}
	option = {
		name = ww1_bruderkrieg.2.a
		add_victory_points = {
			province = 43
			value = 20
		}
		add_ideas = AUH_determined_ausgleich
		hidden_effect = {
			add_ideas = AUH_no_surrender
		}
		set_capital = 43
	}
}

###Serbian rebels in Bosnia
country_event = {
	id = ww1_bruderkrieg.3
	title = ww1_bruderkrieg.3.t
	desc = ww1_bruderkrieg.3.d
	trigger = {
		tag = SER
		AUH = {
			has_war_with = GER
		}
		BOS = {
			exists = no
		}
	}
	fire_only_once = yes
	immediate = {
		AUH = {
			remove_state_core = 104
		}
		BOS = {
			transfer_state = 104
			declare_war_on = {
				target = AUH
				type = take_state_focus
			}
			division_template = {
				name = "Bosanski pobunjenici"
				is_locked = yes
				regiments = {
					infantry = {
						x = 0
						y = 0
					}
					infantry = {
						x = 0
						y = 1
					}
					infantry = {
						x = 0
						y = 2
					}
				}	
			}	
		}
		104 = {
			create_unit = {
				division = "name = \"Division I\" division_template = \"Bosanski pobunjenici\" start_experience_factor = 0.5 start_equipment_factor = 0.5"
				owner = BOS
			}
			create_unit = {
				division = "name = \"Division I\" division_template = \"Bosanski pobunjenici\" start_experience_factor = 0.5 start_equipment_factor = 0.5"
				owner = BOS
			}
			create_unit = {
				division = "name = \"Division I\" division_template = \"Bosanski pobunjenici\" start_experience_factor = 0.5 start_equipment_factor = 0.5"
				owner = BOS
			}
		}
	}
	option = {
		name = ww1_bruderkrieg.3.a
		add_to_war = {
			targeted_alliance = BOS
			enemy = AUH
		}
		puppet = BOS
		BOS = {
			set_politics = {
				ruling_party = neutrality
				elections_allowed = no
			}
			set_popularities = {
				democratic = 30
				neutrality = 70
			}
		}
	}
	option = {
		name = ww1_bruderkrieg.3.b
		add_war_support = -0.05
	}
}

###Germany conquers Vienna-France mobilizes
country_event = {
	id = ww1_bruderkrieg.4
	title = ww1_bruderkrieg.4.t
	desc = ww1_bruderkrieg.4.d
	trigger = {
		original_tag = FRA
		has_war = no
		GER = {
			has_war_with = AUH
			controls_state = 4
		}
	}
	option = {
		name = ww1_bruderkrieg.4.a
		GER = {
			country_event = ww1_bruderkrieg.5
		}
		add_war_support = 0.05
		add_stability = -0.05
	}
	option = {
		name = ww1_bruderkrieg.4.b
		add_war_support = -0.05
	}
}

###French threat
country_event = {
	id = ww1_bruderkrieg.5
	title = ww1_bruderkrieg.5.t
	desc = ww1_bruderkrieg.5.d
	is_triggered_only = yes
	trigger = {
		original_tag = GER
		has_war_with = AUH
		NOT = {
			has_war_with = FRA
		}
	}
	option = {
		name = ww1_bruderkrieg.5.a
		AUH = {
			country_event = ww1_bruderkrieg.5
		}
	}
	option = {
		name = ww1_bruderkrieg.5.b
		FRA = {
			declare_war_on = {
				target = GER
				type = take_core_state
				generator = {
					28
				}
			}
		}
	}
}

###Austrian answer to white peace offer
country_event = {
	id = ww1_bruderkrieg.6
	title = ww1_bruderkrieg.6.t
	desc = ww1_bruderkrieg.6.d
	is_triggered_only = yes
	option = {
		name = ww1_bruderkrieg.6.a
		white_peace = GER
		GER = {
			transfer_state = 153
			transfer_state = 152
			transfer_state = 4
			transfer_state = 69
			transfer_state = 39
			transfer_state = 102
			set_truce = {
				target = HUN
				days = 365
			}
		}
		if = {
			limit = {
				has_war_with = ITA
			}
			ITA = {
				transfer_state = 244
				transfer_state = 736
				transfer_state = 163
				white_peace = AUH
				set_truce = {
					target = HUN
					days = 365
				}
			}
			else = {
				GER = {
					transfer_state = 244
					transfer_state = 736
				}
			}
		}
		if = {
			limit = {
				has_war_with = ROM
			}
			ROM = {
				transfer_state = 82
				transfer_state = 81
				transfer_state = 84
				set_truce = {
					target = HUN
					days = 365
				}
			}
			white_peace = ROM
		}
		if = {
			limit = {
				has_war_with = SER
			}
			SER = {
				transfer_state = 575
				transfer_state = 103
				annex_country = {
					target = BOS
				}
				transfer_state = 764
				white_peace = AUH
				set_truce = {
					target = HUN
					days = 365
				}
			}
		}
		transfer_navy = HUN
		every_unit_leader = {
			set_nationality = HUN
		}
		every_state = {
			limit = {
				OR = {
					is_core_of = AUH
					is_claimed_by = AUH
				}
			}
			add_claim_by = HUN
		}
		HUN = {
			inherit_technology = AUH
			annex_country = {
				target = AUH
				transfer_troops = yes
			}
			change_tag_from = AUH
			set_party_name = {
				ideology = neutrality
				long_name = AUH_neutrality_party
				name = AUH_neutrality_party
			}
			add_ideas = AUH_ww1_House_Habsburg_Lorraine
			if = {
				limit = {
					AUH = {
						has_country_leader = {
							name = "Franz Joseph I"
							ruling_only = yes
						}
					}
				}
				create_country_leader = {
					name = "I. Ferenc József"
					picture = "gfx/leaders/AUH/AUH_franz_joseph_i.dds"
					expire = "1935.1.1"
					ideology = autocracy
					traits = {oldschool_kaiser trait_autocracy }
				}
			}
			if = {
				limit = {
					AUH = {
						has_country_leader = {
							name = "Franz Ferdinand I"
							ruling_only = yes
						}
					}
				}
				create_country_leader={
					name = "I. Ferenc Ferdinánd"
					picture = "gfx/leaders/AUH/AUH_franz_ferdinand.dds"
					expire = "1935.1.1"
					ideology = autocracy
					traits = { unpopular_monarch trait_autocracy }
				}
			}
			if = {
				limit = {
					AUH = {
						has_country_leader = {
							name = "Karl I"
							ruling_only = yes
						}
					}
				}
				create_country_leader = { 
					name = "IV. Károly"
					picture = "gfx/leaders/AUH/AUH_karl_i.dds"
					expire = "1935.1.1"
					ideology = autocracy
					traits = { trait_autocracy }
				}
			}
		}
		FRA = {
			give_guarantee = HUN
		}
	}
}

# POLAND AND WEST UKRAINE
############################
country_event = {
	id = ww1_bruderkrieg.7
	title = ww1_bruderkrieg.7.t
	desc = ww1_bruderkrieg.7.d
	trigger = {
		tag = AUH
		has_war_with = GER
	}
	mean_time_to_happen = {
		days = 10
	}
	option = {
		name = ww1_bruderkrieg.7.a
		every_state = {
			limit = {
				OR = {
					is_owned_by = AUH
					is_owned_by = GAL
				}
				is_core_of = UKR
				NOT = {
					state = 73
					state = 237
				}
			}
			remove_core_of = AUH
			RUS = {
				transfer_state = PREV
			}
		}
		every_state = {
			limit = {
				OR = {
					is_owned_by = AUH
					is_owned_by = GAL
				}
				is_core_of = POL
				NOT = {
					state = 72
				}
			}
			remove_core_of = AUH
			POL = {
				transfer_state = PREV
				division_template = {
					name = "Polski Ruch Oporu"
					is_locked = yes
					regiments = {
						infantry = {
							x = 0
							y = 0
						}
						infantry = {
							x = 0
							y = 1
						}
						infantry = {
							x = 0
							y = 2
						}
					}
				}
				capital_scope = {
					create_unit = {
						division = "name = \"Division I\" division_template = \"Polski Ruch Oporu\" start_experience_factor = 0.7 start_equipment_factor = 0.9"
						owner = POL
					}
					create_unit = {
						division = "name = \"Division II\" division_template = \"Polski Ruch Oporu\" start_experience_factor = 0.7 start_equipment_factor = 0.6"
						owner = POL
					}
					create_unit = {
						division = "name = \"Division III\" division_template = \"Polski Ruch Oporu\" start_experience_factor = 0.5 start_equipment_factor = 0.5"
						owner = POL
					}
				}
				if = {
					limit = {
						NOT = {
							is_subject_of = RUS
						}
					}
					RUS = {
						declare_war_on = {
							target = PREV
							type = annex_everything
						}
					}
				}
			}
		}
		every_country = {
			limit = {
				owns_state = 79
			}
			transfer_state = 80
		}
		every_state = {
			limit = {
				is_core_of = GAL
			}
			remove_core_of = GAL
		}
	}
}
